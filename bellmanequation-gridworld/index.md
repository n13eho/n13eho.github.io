# Bellman Equation: Gridworld


## é—®é¢˜æè¿°

æ¸¸æˆè§„åˆ™ï¼šæ­£å¸¸ç§»åŠ¨ä¸€æ¬¡çš„å¥–åŠ±ä¸º0ï¼›å‡ºç•Œæ—¶å›åˆ°å½“å‰ä½ç½®ï¼Œå¥–åŠ±ä¸º-1ï¼›Aä½ç½®é€‰æ‹©ä»»æ„æ–¹å‘éƒ½åˆ°è¾¾Aâ€™ï¼Œå¥–åŠ±ä¸º+10ï¼›Bä½ç½®é€‰æ‹©ä»»æ„æ–¹å‘éƒ½åˆ°è¾¾Bâ€™ï¼Œå¥–åŠ±ä¸º+5ï¼› æŠ˜æ‰£ç‡y = 0.9ã€‚

å‡å®šç­–ç•¥ä¸ºï¼›ä»æ¯ä¸ªæ ¼å­ç­‰æ¦‚ç‡é€‰æ‹©å››ä¸ªç§»åŠ¨æ–¹å‘ ï¼ˆè¡Œä¸ºï¼‰

![](https://nehopicbed.oss-cn-beijing.aliyuncs.com/img/202212012302219.png)

ç”¨Bellman Equationå¤ç°å³è¾¹5*5çš„çŠ¶æ€ä¼°å€¼

## è§£

è®°å·è§„å®šï¼šobjç§»åŠ¨åˆ°å·¦ä¸Šè§’çš„çŠ¶æ€ï¼šs(0, 0)/s(0)ï¼Œç§»åŠ¨åˆ°å³ä¸‹è§’çš„çŠ¶æ€ï¼šs(4, 4)/s(24)

å¸¦å…¥Bellman Equationï¼š

$$
v_{\pi}(s) = \sum_{a}\pi(a|s)\sum_{s', r}p(s', r|s, a)[r + \gamma v_{\pi}s']
$$

å¯¹äºåœ¨ä½ç½®(0, 0)çš„çŠ¶æ€ï¼š

$$
\begin{align}
v_{\pi}(0) =
 &\frac{1}{4}\sum_{s', r}p(s', r|s, a)[r + \gamma v_{\pi}s(1)]\quadå‘å³èµ°\\
+&\frac{1}{4}\sum_{s', r}p(s', r|s, a)[r + \gamma v_{\pi}s(ğŸ˜«)]\quadå‘å·¦èµ°\\
+&\frac{1}{4}\sum_{s', r}p(s', r|s, a)[r + \gamma v_{\pi}s(5)]\quadå‘ä¸‹èµ°\\
+&\frac{1}{4}\sum_{s', r}p(s', r|s, a)[r + \gamma v_{\pi}s(ğŸ˜«)]\quadå‘ä¸Šèµ°\\


\end{align}
$$

å¯¹äºè¿™é‡Œçš„

$$
\sum_{s', r}p(s', r|s, a)[r + \gamma v_{\pi}s']
$$

é™¤äº†ç‰¹æ®Šä½ç½®Aå’ŒBå¤–ï¼Œå…¶ä½™éƒ½æ˜¯`0 * [] + 0 * [] + 0 * [] + 1 * [0 + 0.9 * ä¸‹ä¸€ä¸ªçŠ¶æ€çš„ä¼°å€¼]`ï¼Œæ‰€ä»¥å¯¹äºä½ç½®(0, 0)ï¼š

$$
\begin{align}
v_{\pi}(0) =
 &\frac{1}{4}[0 + 0.9  v_{\pi}s(1)]\quadå‘å³èµ°\\
+&\frac{1}{4}[-1 + 0.9 v_{\pi}s(0)]\quadå‘å·¦èµ°\\
+&\frac{1}{4}[0 + 0.9 v_{\pi}s(5)]\quadå‘ä¸‹èµ°\\
+&\frac{1}{4}[-1 + 0.9 v_{\pi}s(0)]\quadå‘ä¸Šèµ°\\
\end{align}
$$
